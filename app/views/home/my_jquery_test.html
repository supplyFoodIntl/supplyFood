<html>
    
    <head>
        <script type="text/javascript">
    
//        $('form').on('click', '.remove_fields', function(event) {
//          $(this).prev('input[type=hidden]').val('1');
//          $(this).closest('fieldset').hide();
//          return event.preventDefault();
//        });
//        $('form').on('click', '.add_fields', function(event) {
//          var regexp, time;
//          time = new Date().getTime();
//          regexp = new RegExp($(this).data('id'), 'g');
//          $(this).before($(this).data('fields').replace(regexp, time));
//          return event.preventDefault();
//        });
    
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>    </head>
    <body>

<div id="dynamic_form">
</div>


<div id="address1">
<form action="/addresses" accept-charset="UTF-8" method="post" class="form-horizontal" id="address1" >
    <input name="utf8" type="hidden" value="&#x2713;" />
    <input type="hidden" name="authenticity_token" value="auZEQSLVFGb81cClHyoOlvMd1JLzqLO9dc4fW7hnQzXuzbl99hHUcjJdKgv9i6xH6v0fBn2dp6N/kzqLP8T0ew==" />

    
    <div class="form-group field">  
        <div class="control-label col-sm-4">
            <label for="address_public_place_id">Public place</label>
        </div>
        <div class="col-sm-8">
            <input type="text" name="address[public_place_id]" id="address_public_place_id" />
        </div>
    </div>
    <div class="form-group field">  
        <div class="control-label col-sm-4">
            <label for="address_private_place_number">Private place number</label>
        </div>
        <div class="col-sm-8">
            <input type="number" name="address[private_place_number]" id="address_private_place_number" />
        </div>
    </div>
    <div class="form-group field">  
        <div class="control-label col-sm-4">
            <div class="field">
                <label for="address_private_place_type_id">Private place type</label>
                <input type="text" name="address[private_place_type_id]" id="address_private_place_type_id" />
            </div>
        </div>
    </div>
    <div class="form-group field">  
        <div class="control-label col-sm-4">
            <div class="actions">
                <input type="submit" name="commit" value="Create Address" data-disable-with="Create Address" />
            </div>
        </div>
    </div>
</form>
    <a href="" class="remove_fields">remove</a>
</div>
<p><a href="" class="add_fields">Click to add address</a></p> 

<script>
    
$(document).ready(function(){
    $(".remove_fields").click(function(event){
        alert ( $(this).closest('div'));
        $(this).closest('div').hide();
        return event.preventDefault();
    });
});
$(document).ready(function(){
    $(".add_fields").click(function(event){
//        $(this).hide();
        
        $("#dynamic_form").append('<div id="address"><form action="/addresses" accept-charset="UTF-8" method="post" class="form-horizontal" id="address1" > <input name="utf8" type="hidden" value="&#x2713;"/> <input type="hidden" name="authenticity_token" value="auZEQSLVFGb81cClHyoOlvMd1JLzqLO9dc4fW7hnQzXuzbl99hHUcjJdKgv9i6xH6v0fBn2dp6N/kzqLP8T0ew=="/> <div class="form-group field"> <div class="control-label col-sm-4"> <div class="field"> <label for="address_public_place_id">Public place</label> <input type="text" name="address[public_place_id]" id="address_public_place_id"/> </div></div></div><div class="form-group field"> <div class="control-label col-sm-4"> <div class="field"> <label for="address_private_place_number">Private place number</label> <input type="number" name="address[private_place_number]" id="address_private_place_number"/> </div></div></div><div class="form-group field"> <div class="control-label col-sm-4"> <div class="field"> <label for="address_private_place_type_id">Private place type</label> <input type="text" name="address[private_place_type_id]" id="address_private_place_type_id"/> </div></div></div><div class="form-group field"> <div class="control-label col-sm-4"> <div class="actions"> <input type="submit" name="commit" value="Create Address" data-disable-with="Create Address"/> </div></div></div></form> <a href="" id="sf_remove_address">remove</a></div>');
        return event.preventDefault();
        
    });
});
    


</script>

</body>
</html>
